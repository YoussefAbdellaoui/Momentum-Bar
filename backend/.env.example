# ===========================================
# MomentumBar License Server Configuration
# ===========================================

# Server
PORT=3000
NODE_ENV=development

# Database (PostgreSQL)
# Example: postgres://user:password@localhost:5432/momentumbar
DATABASE_URL=postgres://localhost:5432/momentumbar

# Stripe
# Get these from https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# Stripe Price IDs (create products at https://dashboard.stripe.com/products)
STRIPE_PRICE_SOLO=price_...
STRIPE_PRICE_MULTIPLE=price_...
STRIPE_PRICE_ENTERPRISE=price_...

# Email (Resend)
# Get API key from https://resend.com/api-keys
RESEND_API_KEY=re_...
EMAIL_FROM=MomentumBar <noreply@momentumbar.com>

# Admin API
# Generate a secure random string for admin access
ADMIN_API_KEY=your-secure-admin-key-here

# CORS (comma-separated list of allowed origins)
ALLOWED_ORIGINS=https://momentumbar.app,https://www.momentumbar.app



To deploy:

  1. Set up PostgreSQL (Railway, Supabase, or Neon)
  2. Configure environment:
  cp .env.example .env
  # Edit .env with your credentials
  3. Install & run:
  cd backend
  npm install
  npm run db:init  # Create tables
  npm start        # Start server
  4. Stripe setup:
    - Create products at dashboard.stripe.com/products
    - Add webhook endpoint: https://your-api.com/webhooks/stripe
    - Listen for checkout.session.completed
  5. Update the app - Change the base URL in LicenseAPIClient.swift:
  private let baseURL = "https://your-deployed-api.com/api/v1"

  API Endpoints:
  - POST /api/v1/license/activate - Activate license on machine
  - POST /api/v1/license/validate - Validate license (phone home)
  - POST /api/v1/license/deactivate - Deactivate machine
  - GET /api/v1/license/info/:key - Get license info
  - POST /webhooks/stripe - Stripe payment webhook
